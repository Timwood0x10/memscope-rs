# 提升测试覆盖率

当前项目中的测试覆盖率太低了，提升一下

提升测试覆盖率还有一个目的，就是通过测试，来验证代码的正确性，以及发现并且修复潜在的逻辑bug。

1. 对于缺少test的模块，以test mod的形式进行添加到文件内，编码风格参考./aim/requirement.md。禁止创建任何的rs file
2. 工作流程是先定位覆盖率低的模块，然后阅读模块中的代码，制定合适的test case，并且每编写一个模块就测试一次，测试通过之后，再进行下一个模块，并且test case 一定要有意义，且符合当前模块，不能写一些无意义的test case，禁止出现滥竽充数的test case，质量必须高且有意义。
3. 慎用get_global_tracker()，以及 `TrackingManager::new()` 尤其是在运行多个test case 的时候会导致死锁。必须想法子规避。
4. 对于失败的test case，需要搞清楚是test case本身的问题，还是代码的问题，如果是test case的问题，那么需要修改test case，如果是代码的问题，那么需要找到逻辑问题，并且列举出为什么这么修复的原因。
5. 你应该甄别覆盖率低的模块，是否真的有必要添加test mod，如果真的没有必要，那么可以跳过。
6. 

**Filename **                                                    **Regions**    **Missed Regions **    **Cover **  **Functions**  **Missed Functions**  **Executed **      **Lines**      **Missed Lines **    **Cover**    **Branches **  **Missed Branches **    **Cover**

**------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------**

**advanced_trackable_macro.rs**                                      **420** **                **2**    **99.52%**          **21 **                **0** **  **100.00%** **        **255** **                **0 **  **100.00%** **          **0** **                **0** **        **-

**advanced_types.rs**                                                **890**                **61**    **93.15%**          **35 **                **1**    **97.14%** **        **831** **              **143**    **82.79%** **          **0** **                **0** **        **-

**analysis/async_analysis.rs **                                      **391**                **93**    **76.21%**          **22 **                **6**    **72.73%** **        **292**                **71**    **75.68%** **          **0** **                **0** **        **-**

**analysis/borrow_analysis.rs**                                      **350** **              **120**    **65.71%**          **25 **                **5**    **80.00%** **        **241**                **80**    **66.80%** **          **0** **                **0** **        **-

**analysis/circular_reference.rs **                                  **803** **              **109**    **86.43%**          **21 **                **2**    **90.48%** **        **708**                **77**    **89.12%** **          **0** **                **0** **        **-

**analysis/closure_analysis.rs**                                    **1261**                **32**    **97.46%**          **79 **                **2**    **97.47%** **        **850**                **21**    **97.53%** **          **0** **                **0** **        **-**

**analysis/enhanced_ffi_function_resolver.rs **                      **866** **              **334**    **61.43%**          **36 **                **9**    **75.00%** **        **554** **              **197**    **64.44%** **          **0** **                **0** **        **-**

**analysis/enhanced_memory_analysis.rs**                            **1664** **              **190**    **88.58%**          **98 **                **4**    **95.92%**        **1399** **              **163**    **88.35%** **          **0** **                **0** **        **-

**analysis/ffi_function_resolver.rs**                                **642** **              **144**    **77.57%**          **44**                **10**    **77.27%** **        **511**                **92**    **82.00%** **          **0** **                **0** **        **-

**analysis/generic_analysis.rs**                                    **1793**                **31**    **98.27%** **        **103 **                **0** **  **100.00%** **        **999**                **16**    **98.40%** **          **0** **                **0** **        **-**

**analysis/lifecycle_analysis.rs**                                  **1133**                **48**    **95.76%**          **66 **                **4**    **93.94%** **        **717**                **31**    **95.68%** **          **0** **                **0** **        **-**

**analysis/memory_passport_tracker.rs**                              **642** **              **141**    **78.04%**          **40**                **14**    **65.00%** **        **476** **              **134**    **71.85%** **          **0** **                **0** **        **-**

**analysis/mod.rs**                                                  **498** **                **3**    **99.40%**          **37 **                **1**    **97.30%** **        **305** **                **3**    **99.02%** **          **0** **                **0** **        **-**

**analysis/safety_analyzer.rs **                                    **1330** **              **149**    **88.80%**          **65 **                **7**    **89.23%**        **1075** **              **123**    **88.56%** **          **0** **                **0** **        **-

**analysis/security_violation_analyzer.rs **                        **1313**                **62**    **95.28%**          **65 **                **0** **  **100.00%** **        **959**                **31**    **96.77%** **          **0** **                **0** **        **-

**analysis/unknown_memory_regions.rs **                              **877**                **55**    **93.73%**          **67 **                **4**    **94.03%** **        **597**                **35**    **94.14%** **          **0** **                **0** **        **-**

**analysis/unsafe_ffi_tracker.rs**                                  **2331** **              **625**    **73.19%**          **90**                **21**    **76.67%**        **1735** **              **522**    **69.91%** **          **0** **                **0** **        **-

**analysis/variable_relationships.rs**                              **1165**                **64**    **94.51%**          **55 **                **1**    **98.18%** **        **837**                **37**    **95.58%** **          **0** **                **0** **        **-**

**bin/allocation_count_diagnostic.rs **                              **358** **              **190**    **46.93%**          **12 **                **5**    **58.33%** **        **248** **              **132**    **46.77%** **          **0** **                **0** **        **-**

**bin/core_performance_test.rs **                                    **610** **              **215**    **64.75%**          **20 **                **2**    **90.00%** **        **438** **              **145**    **66.89%** **          **0** **                **0** **        **-**

**bin/establish_baseline.rs**                                        **243**                **31**    **87.24%** **          **6 **                **1**    **83.33%** **        **118**                **10**    **91.53%** **          **0** **                **0** **        **-

**bin/large_active_allocations.rs**                                  **214**                **81**    **62.15%** **          **8 **                **2**    **75.00%** **        **107**                **44**    **58.88%** **          **0** **                **0** **        **-

**bin/lifecycle_analysis.rs**                                        **574** **              **158**    **72.47%**          **24 **                **6**    **75.00%** **        **308** **              **103**    **66.56%** **          **0** **                **0** **        **-**

**bin/performance_only_benchmark.rs**                                **581** **              **244**    **58.00%**          **14 **                **2**    **85.71%** **        **342** **              **114**    **66.67%** **          **0** **                **0** **        **-**

**bin/run_benchmark.rs **                                            **347**                **35**    **89.91%**          **21 **                **0** **  **100.00%** **        **376**                **15**    **96.01%** **          **0** **                **0** **        **-

**bin/simple_benchmark.rs**                                          **534** **              **208**    **61.05%**          **14 **                **2**    **85.71%** **        **310** **              **101**    **67.42%** **          **0** **                **0** **        **-**

**cli/commands/analyze.rs **                                        **1470** **              **474**    **67.76%**          **56**                **17**    **69.64%** **        **834** **              **300**    **64.03%** **          **0** **                **0** **        **-**

**cli/commands/generate_report.rs**                                  **530** **              **111**    **79.06%**          **19 **                **3**    **84.21%** **        **292**                **59**    **79.79%** **          **0** **                **0** **        **-

**cli/commands/html_from_json/data_integrator.rs**                  **1291**                **41**    **96.82%**          **68 **                **1**    **98.53%** **        **846**                **17**    **97.99%** **          **0** **                **0** **        **-**

**cli/commands/html_from_json/data_normalizer.rs**                  **1140** **              **215**    **81.14%** **        **115**                **52**    **54.78%** **        **646**                **92**    **85.76%** **          **0** **                **0** **        **-**

**cli/commands/html_from_json/debug_logger.rs**                      **536** **              **193**    **63.99%**          **39 **                **8**    **79.49%** **        **380** **              **137**    **63.95%** **          **0** **                **0** **        **-**

**cli/commands/html_from_json/direct_json_template.rs **            **2253** **              **840**    **62.72%** **        **166**                **98**    **40.96%**        **1391** **              **441**    **68.30%** **          **0** **                **0** **        **-**

**cli/commands/html_from_json/error_handler.rs **                    **899** **              **487**    **45.83%**          **34 **                **8**    **76.47%** **        **566** **              **275**    **51.41%** **          **0** **                **0** **        **-**

**cli/commands/html_from_json/json_file_discovery.rs **              **297**                **77**    **74.07%**          **17 **                **1**    **94.12%** **        **201**                **38**    **81.09%** **          **0** **                **0** **        **-**

**cli/commands/html_from_json/large_file_optimizer.rs**              **433** **              **177**    **59.12%**          **20 **                **5**    **75.00%** **        **295** **              **117**    **60.34%** **          **0** **                **0** **        **-**

**cli/commands/html_from_json/mod.rs**                              **1457** **              **272**    **81.33%**          **40 **                **6**    **85.00%** **        **940** **              **218**    **76.81%** **          **0** **                **0** **        **-**

**cli/commands/test.rs **                                            **237** **              **129**    **45.57%**          **16 **                **5**    **68.75%** **        **133**                **71**    **46.62%** **          **0** **                **0** **        **-

**core/adaptive_hashmap.rs **                                        **299**                **70**    **76.59%**          **17 **                **4**    **76.47%** **        **168**                **50**    **70.24%** **          **0** **                **0** **        **-**

**core/allocation_adapter.rs **                                      **875**                **83**    **90.51%**          **79**                **21**    **73.42%** **        **534**                **70**    **86.89%** **          **0** **                **0** **        **-**

**core/allocator.rs**                                                **369**                **34**    **90.79%**          **33 **                **3**    **90.91%** **        **243**                **15**    **93.83%** **          **0** **                **0** **        **-**

**core/atomic_stats.rs **                                            **659**                **10**    **98.48%**          **53 **                **0** **  **100.00%** **        **450** **                **3**    **99.33%** **          **0** **                **0** **        **-**

**core/bounded_memory_stats.rs **                                    **426**                **95**    **77.70%**          **35 **                **9**    **74.29%** **        **410**                **68**    **83.41%** **          **0** **                **0** **        **-**

**core/call_stack_normalizer.rs**                                    **558**                **91**    **83.69%**          **36 **                **8**    **77.78%** **        **393**                **88**    **77.61%** **          **0** **                **0** **        **-**

**core/clone_monitor.rs**                                            **171**                **14**    **91.81%**          **16 **                **0** **  **100.00%** **        **113**                **11**    **90.27%** **          **0** **                **0** **        **-

**core/clone_optimizer.rs**                                          **676** **                **0 **  **100.00%**          **35 **                **0** **  **100.00%** **        **377** **                **0 **  **100.00%** **          **0** **                **0** **        **-

**core/clone_utils.rs**                                              **288** **                **5**    **98.26%**          **19 **                **0** **  **100.00%** **        **170** **                **2**    **98.82%** **          **0** **                **0** **        **-

**core/comprehensive_data_deduplicator.rs **                        **1424** **              **109**    **92.35%**          **61 **                **6**    **90.16%** **        **940**                **66**    **92.98%** **          **0** **                **0** **        **-

**core/edge_case_handler.rs**                                        **466** **              **134**    **71.24%**          **37**                **13**    **64.86%** **        **354** **              **102**    **71.19%** **          **0** **                **0** **        **-**

**core/enhanced_call_stack_normalizer.rs **                          **466** **              **182**    **60.94%**          **35**                **16**    **54.29%** **        **341** **              **144**    **57.77%** **          **0** **                **0** **        **-**

**core/enhanced_pointer_extractor.rs **                              **255**                **99**    **61.18%**          **25**                **12**    **52.00%** **        **231** **              **102**    **55.84%** **          **0** **                **0** **        **-

**core/enhanced_type_inference.rs**                                  **557** **              **152**    **72.71%**          **19 **                **4**    **78.95%** **        **372** **              **123**    **66.94%** **          **0** **                **0** **        **-**

**core/error.rs**                                                    **770**                **51**    **93.38%**          **41 **                **2**    **95.12%** **        **497**                **34**    **93.16%** **          **0** **                **0** **        **-**

**core/error_adapter.rs**                                            **579** **              **108**    **81.35%**          **24 **                **1**    **95.83%** **        **297**                **44**    **85.19%** **          **0** **                **0** **        **-

**core/fast_data_deduplicator.rs **                                  **339**                **10**    **97.05%**          **21 **                **2**    **90.48%** **        **207** **                **7**    **96.62%** **          **0** **                **0** **        **-

**core/integration_validator.rs **                                  **1175** **              **206**    **82.47%**          **46 **                **3**    **93.48%** **        **742** **              **129**    **82.61%** **          **0** **                **0** **        **-**

**core/lifecycle_summary.rs**                                        **554**                **30**    **94.58%**          **33 **                **0** **  **100.00%** **        **449**                **14**    **96.88%** **          **0** **                **0** **        **-

**core/optimized_locks.rs**                                          **637**                **29**    **95.45%**          **50 **                **4**    **92.00%** **        **413**                **22**    **94.67%** **          **0** **                **0** **        **-**

**core/optimized_tracker.rs**                                        **366** **                **8**    **97.81%**          **24 **                **0** **  **100.00%** **        **232**                **16**    **93.10%** **          **0** **                **0** **        **-**

**core/optimized_types.rs**                                          **567** **              **193**    **65.96%**          **50**                **13**    **74.00%** **        **347**                **89**    **74.35%** **          **0** **                **0** **        **-

**core/ownership_history.rs**                                        **432**                **23**    **94.68%**          **26 **                **2**    **92.31%** **        **355**                **27**    **92.39%** **          **0** **                **0** **        **-**

**core/safe_operations.rs**                                          **228**                **11**    **95.18%**          **22 **                **3**    **86.36%** **        **131**                **18**    **86.26%** **          **0** **                **0** **        **-**

**core/scope_tracker.rs**                                            **640**                **88**    **86.25%**          **35 **                **7**    **80.00%** **        **360**                **74**    **79.44%** **          **0** **                **0** **        **-**

**core/sharded_locks.rs**                                            **334** **              **111**    **66.77%**          **35**                **17**    **51.43%** **        **221**                **85**    **61.54%** **          **0** **                **0** **        **-

**core/shared_types.rs **                                            **488** **                **0 **  **100.00%**          **50 **                **0** **  **100.00%** **        **301** **                **0 **  **100.00%** **          **0** **                **0** **        **-

**core/simple_mutex.rs **                                            **118** **                **0 **  **100.00%**          **12 **                **0** **  **100.00%**          **72** **                **0 **  **100.00%** **          **0** **                **0** **        **-**

**core/smart_optimization.rs **                                      **183**                **88**    **51.91%**          **20 **                **9**    **55.00%** **        **126**                **56**    **55.56%** **          **0** **                **0** **        **-**

**core/string_pool.rs**                                              **567**                **11**    **98.06%**          **35 **                **2**    **94.29%** **        **294** **                **9**    **96.94%** **          **0** **                **0** **        **-

**core/string_pool_monitor.rs**                                      **339**                **17**    **94.99%**          **27 **                **0** **  **100.00%** **        **352**                **21**    **94.03%** **          **0** **                **0** **        **-

**core/targeted_optimizations.rs **                                  **645**                **71**    **88.99%**          **46 **                **9**    **80.43%** **        **387**                **45**    **88.37%** **          **0** **                **0** **        **-**

**core/test_optimized_locks.rs **                                    **106** **                **6**    **94.34%** **          **6 **                **0** **  **100.00%**          **58** **                **3**    **94.83%** **          **0** **                **0** **        **-

**core/threshold_batch_processor.rs**                                **270**                **76**    **71.85%**          **21 **                **4**    **80.95%** **        **193**                **44**    **77.20%** **          **0** **                **0** **        **-**

**core/tracker/allocation_tracking.rs **                            **1476** **              **261**    **82.32%**          **80**                **17**    **78.75%** **        **937** **              **215**    **77.05%** **          **0** **                **0** **        **-**

**core/tracker/config.rs **                                          **259** **                **5**    **98.07%**          **17 **                **0** **  **100.00%** **        **169** **                **0 **  **100.00%** **          **0** **                **0** **        **-

**core/tracker/export_html.rs**                                      **341**                **41**    **87.98%**          **19 **                **4**    **78.95%** **        **334**                **18**    **94.61%** **          **0** **                **0** **        **-**

**core/tracker/export_json.rs **                                    **1984** **              **338**    **82.96%**          **83**                **18**    **78.31%**        **1375** **              **207**    **84.95%** **          **0** **                **0** **        **-

**core/tracker/global_functions.rs **                                **145**                **41**    **71.72%**          **16 **                **6**    **62.50%**          **70**                **23**    **67.14%** **          **0** **                **0** **        **-

**core/tracker/memory_analysis.rs **                                **2000** **              **481**    **75.95%**          **75 **                **8**    **89.33%**        **1489** **              **412**    **72.33%** **          **0** **                **0** **        **-

**core/tracker/memory_tracker.rs**                                  **1334** **              **235**    **82.38%**          **90**                **20**    **77.78%** **        **964** **              **215**    **77.70%** **          **0** **                **0** **        **-**

**core/tracker/tracking_manager.rs **                                **182**                **68**    **62.64%**          **22**                **11**    **50.00%** **        **216**                **58**    **73.15%** **          **0** **                **0** **        **-**

**core/types/mod.rs**                                                **724** **              **162**    **77.62%**          **48 **                **2**    **95.83%** **        **617**                **58**    **90.60%** **          **0** **                **0** **        **-

**core/unwrap_safe.rs**                                              **605** **              **110**    **81.82%**          **62**                **12**    **80.65%** **        **426**                **64**    **84.98%** **          **0** **                **0** **        **-

**enhanced_types.rs**                                                **670**                **10**    **98.51%**          **64 **                **0** **  **100.00%** **        **545** **                **0 **  **100.00%** **          **0** **                **0** **        **-**

**export/adaptive_performance.rs**                                  **1340**                **73**    **94.55%**          **68 **                **1**    **98.53%** **        **826**                **37**    **95.52%** **          **0** **                **0** **        **-**

**export/analysis_engine.rs **                                      **1543** **              **115**    **92.55%**          **54 **                **8**    **85.19%**        **1034**                **75**    **92.75%** **          **0** **                **0** **        **-**

**export/api.rs **                                                  **1153** **              **145**    **87.42%**          **56**                **10**    **82.14%** **        **720**                **80**    **88.89%** **          **0** **                **0** **        **-

**export/batch_processor.rs **                                      **1393** **              **138**    **90.09%**          **77**                **20**    **74.03%** **        **988**                **74**    **92.51%** **          **0** **                **0** **        **-

**export/binary/batch_processor.rs **                                **632** **              **362**    **42.72%**          **47**                **17**    **63.83%** **        **435** **              **235**    **45.98%** **          **0** **                **0** **        **-**

**export/binary/binary_html_export.rs**                              **789** **              **241**    **69.46%**          **31 **                **2**    **93.55%** **        **625** **              **119**    **80.96%** **          **0** **                **0** **        **-**

**export/binary/binary_html_writer.rs**                              **524** **              **175**    **66.60%**          **35**                **14**    **60.00%** **        **412** **              **141**    **65.78%** **          **0** **                **0** **        **-**

**export/binary/binary_template_engine.rs **                        **1777** **              **112**    **93.70%**          **75 **                **5**    **93.33%**        **1652**                **63**    **96.19%** **          **0** **                **0** **        **-**

**export/binary/cache.rs **                                          **798**                **84**    **89.47%**          **47 **                **9**    **80.85%** **        **502**                **45**    **91.04%** **          **0** **                **0** **        **-**

**export/binary/complex_type_analyzer.rs **                          **610**                **27**    **95.57%**          **28 **                **4**    **85.71%** **        **412**                **13**    **96.84%** **          **0** **                **0** **        **-**

**export/binary/config.rs**                                          **344** **              **125**    **63.66%**          **46**                **22**    **52.17%** **        **361** **              **123**    **65.93%** **          **0** **                **0** **        **-**

**export/binary/error.rs**                                            **67**                **20**    **70.15%** **          **6 **                **2**    **66.67%**          **41**                **15**    **63.41%** **          **0** **                **0** **        **-**

**export/binary/error_recovery.rs**                                  **719** **              **116**    **83.87%**          **51 **                **7**    **86.27%** **        **546**                **88**    **83.88%** **          **0** **                **0** **        **-

**export/binary/ffi_safety_analyzer.rs **                            **811**                **30**    **96.30%**          **44 **                **4**    **90.91%** **        **579**                **15**    **97.41%** **          **0** **                **0** **        **-**

**export/binary/field_parser.rs **                                  **1063** **              **323**    **69.61%**          **49**                **16**    **67.35%** **        **716** **              **249**    **65.22%** **          **0** **                **0** **        **-**

**export/binary/filter_engine.rs **                                  **643** **              **176**    **72.63%**          **40 **                **6**    **85.00%** **        **484** **              **135**    **72.11%** **          **0** **                **0** **        **-**

**export/binary/format.rs**                                          **383** **                **7**    **98.17%**          **35 **                **1**    **97.14%** **        **290** **                **5**    **98.28%** **          **0** **                **0** **        **-**

**export/binary/html_converter.rs**                                  **536** **              **192**    **64.18%**          **14 **                **6**    **57.14%** **        **568** **              **272**    **52.11%** **          **0** **                **0** **        **-**

**export/binary/html_export.rs**                                    **1334** **              **612**    **54.12%**          **55**                **15**    **72.73%** **        **931** **              **324**    **65.20%** **          **0** **                **0** **        **-**

**export/binary/index.rs **                                          **345**                **17**    **95.07%**          **27 **                **2**    **92.59%** **        **231**                **14**    **93.94%** **          **0** **                **0** **        **-**

**export/binary/index_builder.rs **                                  **679** **              **126**    **81.44%**          **29 **                **9**    **68.97%** **        **442** **              **109**    **75.34%** **          **0** **                **0** **        **-**

**export/binary/integration_test_complex_types.rs**                  **264** **                **0 **  **100.00%**          **12 **                **0** **  **100.00%** **        **163** **                **0 **  **100.00%** **          **0** **                **0** **        **-

**export/binary/integration_test_ffi_safety.rs **                    **349** **                **2**    **99.43%**          **18 **                **0** **  **100.00%** **        **245** **                **0 **  **100.00%** **          **0** **                **0** **        **-

**export/binary/integration_test_template_resources.rs **            **364** **                **5**    **98.63%**          **10 **                **0** **  **100.00%** **        **233** **                **5**    **97.85%** **          **0** **                **0** **        **-

**export/binary/integration_test_variable_relationships.rs **        **708** **                **1**    **99.86%**          **41 **                **0** **  **100.00%** **        **577** **                **0 **  **100.00%** **          **0** **                **0** **        **-

**export/binary/memory_layout_serialization.rs**                    **1000** **              **105**    **89.50%**          **40 **                **5**    **87.50%** **        **761**                **31**    **95.93%** **          **0** **                **0** **        **-

**export/binary/mod.rs**                                            **1030** **              **120**    **88.35%**          **38 **                **2**    **94.74%** **        **537**                **61**    **88.64%** **          **0** **                **0** **        **-

**export/binary/parser.rs **                                        **4449**              **2007**    **54.89%** **        **106**                **40**    **62.26%**        **2126** **              **905**    **57.43%** **          **0** **                **0** **        **-

**export/binary/reader.rs **                                        **1580** **              **348**    **77.97%**          **41 **                **5**    **87.80%** **        **778** **              **159**    **79.56%** **          **0** **                **0** **        **-**

**export/binary/selective_json_exporter.rs**                        **1415** **              **609**    **56.96%**          **70**                **14**    **80.00%** **        **912** **              **331**    **63.71%** **          **0** **                **0** **        **-**

**export/binary/selective_reader.rs **                              **1576** **              **341**    **78.36%**          **85**                **29**    **65.88%**        **1133** **              **228**    **79.88%** **          **0** **                **0** **        **-

**export/binary/serializable.rs **                                  **1350** **              **122**    **90.96%**          **69 **                **2**    **97.10%** **        **719** **                **7**    **99.03%** **          **0** **                **0** **        **-**

**export/binary/smart_pointer_serialization.rs **                    **315**                **44**    **86.03%**          **13 **                **2**    **84.62%** **        **195** **                **9**    **95.38%** **          **0** **                **0** **        **-

**export/binary/streaming_field_processor.rs **                      **635** **              **171**    **73.07%**          **60**                **19**    **68.33%** **        **522** **              **126**    **75.86%** **          **0** **                **0** **        **-**

**export/binary/streaming_json_writer.rs**                          **1732** **              **700**    **59.58%**          **67**                **17**    **74.63%**        **1214** **              **407**    **66.47%** **          **0** **                **0** **        **-

**export/binary/string_table.rs**                                    **559** **              **150**    **73.17%**          **37**                **10**    **72.97%** **        **352**                **99**    **71.88%** **          **0** **                **0** **        **-

**export/binary/template_resource_manager.rs **                      **645**                **65**    **89.92%**          **32 **                **7**    **78.12%** **        **376**                **38**    **89.89%** **          **0** **                **0** **        **-**

**export/binary/variable_relationship_analyzer.rs **                **1001**                **56**    **94.41%**          **54 **                **4**    **92.59%** **        **852**                **26**    **96.95%** **          **0** **                **0** **        **-**

**export/binary/writer.rs **                                        **1098** **              **300**    **72.68%**          **41 **                **8**    **80.49%** **        **619** **              **115**    **81.42%** **          **0** **                **0** **        **-**

**export/complex_type_export.rs**                                    **738** **              **225**    **69.51%**          **41 **                **8**    **80.49%** **        **690** **              **145**    **78.99%** **          **0** **                **0** **        **-**

**export/config_optimizer.rs **                                      **304**                **11**    **96.38%**          **19 **                **1**    **94.74%** **        **200** **                **7**    **96.50%** **          **0** **                **0** **        **-

**export/data_localizer.rs **                                        **698** **              **234**    **66.48%**          **47**                **13**    **72.34%** **        **568** **              **194**    **65.85%** **          **0** **                **0** **        **-**

**export/enhanced_json_exporter.rs**                                **1549** **              **152**    **90.19%**          **89**                **35**    **60.67%**        **1033**                **61**    **94.09%** **          **0** **                **0** **        **-**

**export/error_handling.rs **                                        **523** **              **269**    **48.57%**          **33**                **10**    **69.70%** **        **463** **              **233**    **49.68%** **          **0** **                **0** **        **-**

**export/error_recovery.rs **                                        **551** **              **242**    **56.08%**          **29**                **10**    **65.52%** **        **563** **              **259**    **54.00%** **          **0** **                **0** **        **-**

**export/export_enhanced.rs **                                      **4552**              **2055**    **54.86%**          **91**                **24**    **73.63%**        **2781**              **1222**    **56.06%** **          **0** **                **0** **        **-

**export/export_modes.rs **                                          **283**                **80**    **71.73%**          **27 **                **6**    **77.78%** **        **221**                **49**    **77.83%** **          **0** **                **0** **        **-**

**export/fast_export_coordinator.rs **                              **1342** **              **682**    **49.18%**          **73**                **20**    **72.60%**        **1222** **              **510**    **58.27%** **          **0** **                **0** **        **-

**export/high_speed_buffered_writer.rs **                            **515**                **52**    **89.90%**          **27 **                **5**    **81.48%** **        **308**                **28**    **90.91%** **          **0** **                **0** **        **-**

**export/html_export.rs**                                            **489** **              **211**    **56.85%**          **20**                **12**    **40.00%** **        **423** **              **110**    **74.00%** **          **0** **                **0** **        **-**

**export/lifecycle_exporter.rs **                                    **754**                **16**    **97.88%**          **29 **                **0** **  **100.00%** **        **421** **                **1**    **99.76%** **          **0** **                **0** **        **-**

**export/optimized_json_export.rs **                                **3678**              **1808**    **50.84%** **        **139**                **42**    **69.78%**        **2335**              **1156**    **50.49%** **          **0** **                **0** **        **-**

**export/parallel_shard_processor.rs **                              **425**                **43**    **89.88%**          **25 **                **3**    **88.00%** **        **299**                **26**    **91.30%** **          **0** **                **0** **        **-**

**export/progress_monitor.rs **                                      **445** **              **104**    **76.63%**          **35 **                **8**    **77.14%** **        **318**                **68**    **78.62%** **          **0** **                **0** **        **-

**export/quality_validator.rs **                                    **3318**              **1029**    **68.99%** **        **195**                **51**    **73.85%**        **2585** **              **801**    **69.01%** **          **0** **                **0** **        **-

**export/schema_validator.rs **                                      **772** **              **221**    **71.37%**          **41**                **10**    **75.61%** **        **558** **              **156**    **72.04%** **          **0** **                **0** **        **-**

**export/streaming_json_writer.rs **                                **1171** **              **117**    **90.01%**          **55 **                **2**    **96.36%** **        **765**                **19**    **97.52%** **          **0** **                **0** **        **-

**export/system_optimizer.rs**                                      **1025** **              **219**    **78.63%**          **51 **                **5**    **90.20%** **        **799** **              **143**    **82.10%** **          **0** **                **0** **        **-**

**export/visualization.rs **                                        **3109**              **1129**    **63.69%**          **88**                **22**    **75.00%**        **1807** **              **648**    **64.14%** **          **0** **                **0** **        **-**

**lib.rs**                                                          **1722** **              **763**    **55.69%** **        **139**                **53**    **61.87%**        **1113** **              **568**    **48.97%** **          **0** **                **0** **        **-**

**main.rs **                                                        **1061** **              **187**    **82.38%**          **32 **                **5**    **84.38%** **        **707** **              **163**    **76.94%** **          **0** **                **0** **        **-**

**utils.rs**                                                        **1469** **              **221**    **84.96%**          **53 **                **3**    **94.34%** **        **737**                **76**    **89.69%** **          **0** **                **0** **        **-

**variable_registry.rs**                                            **1688** **              **248**    **85.31%**          **82**                **19**    **76.83%**        **1047** **              **138**    **86.82%** **          **0** **                **0** **        **-

**------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------**

**TOTAL **                                                        **128653** **            **29088**    **77.39%**        **6586**              **1298**    **80.29%** **      **87456** **            **18615**    **78.72%** **          **0** **                **0** **        **-**

这是 cargo llvm-cov 运行之后的覆盖率的结果，建议你按照覆盖率低的模块进行优化， 步骤则是，先定位模块，然后仔细阅读模块的源码和设计的理念，之后按照你的理解，编写合适的 test mod 并且保证test mod 可以全部通过（当个文件，以及多个文件混合，都要通过）全部通过之后，转移到下一个模块，直到完成覆盖率优化。


优先补齐（建议添加 test mod，放在各自文件内）
•  export/binary/batch_processor.rs（当前约42.7%）
  价值：批量分片、重试、进度统计的核心调度，稳定性影响大。
  建议用例：
•  分片/批大小边界：空输入、恰好整除、不整除（最后一片较小）。
•  重试策略：注入可控失败（一次失败-一次成功，连续失败），验证重试次数与最终状态。
•  进度与回调：小数据集，验证进度回调计数、顺序和总量一致。
•  错误传播：单个批失败、全部失败，确认错误消息与累积统计正确。
  注意：使用内存中的“假 writer/processor”对象，避免文件IO和全局状态。

•  export/binary/parser.rs（当前约54.9%）
  价值：二进制解析的正确性直接决定输出质量，高风险区域。
  建议用例（基于内存 Cursor）：
•  魔数/版本异常：invalid magic、unsupported version。
•  截断/越界：声明长度大于实际、字符串表下标越界。
•  结构边界：空表、单元素、多层嵌套、零长度变长数组。
•  数值边界：u16/u32临界值、时间戳0与max。
•  容错：遇到未知段类型是否优雅失败并给出明确错误。
  注意：只测纯解析，不依赖文件系统。

•  export/binary/streaming_json_writer.rs（当前约59.6%）
  价值：流式写出逻辑复杂，容易出边界/状态机错误。
  建议用例：
•  缓冲/flush：小缓冲、多次flush、flush后继续写。
•  控制结构：数组/对象的嵌套开闭顺序校验（错误状态应报错）。
•  写失败路径：注入一个会在写入N字节后返回错误的“假 writer”，验证错误传播。
•  大文档分段写：大量小字段写入，确保不会一次性爆缓冲。
  注意：使用内存 Vec`<u8>` 或自定义“故障 writer”。

•  export/error_handling.rs（当前约48.6%）
  价值：统一错误处理与汇总，横切影响大。
  建议用例：
•  错误映射：不同来源（IO/序列化/校验）到统一类别与severity的映射。
•  去重/合并：重复错误、同类多条错误是否正确合并统计。
•  回退消息：缺失上下文时的默认user_message是否合理。
  注意：避免依赖全局 tracker。

•  core/enhanced_pointer_extractor.rs（当前约61.2%）
  价值：指针/地址提取基础工具，边界多且容易误判。
  建议用例：
•  规范输入：0x前缀/无前缀/大小写/分隔符（空格、逗号）。
•  非法输入：空串、非16进制、混合字符、过长字符串。
•  边界数值：0、usize::MAX、对齐边界。
•  并发只读：多线程同时解析只读输入，确保无共享可变状态。
  注意：不触碰任何全局状态。

•  core/smart_optimization.rs（当前约51.9%）
  价值：策略/阈值类逻辑，易回归。
  建议用例：
•  各阈值边界：刚好低于/等于/高于阈值的决策分支。
•  配置开关：关闭/开启优化时的结果差异。
•  负值/零值输入：鲁棒性（不panic/不溢出）。
  注意：只测纯函数或纯结构，不依赖 tracker。

•  core/optimized_types.rs（当前约66.0%）
  价值：类型/结构转换的正确性，容易丢字段（我们之前就遇到过）。
  建议用例：
•  to/from round-trip：保证字段一一对应、布尔/Option/集合类字段不丢失。
•  None/Some 混合：多字段组合的边界。
•  大字段/长字符串：大字符串/大向量被保留。
  注意：仅构造数据、调用转换，不依赖外部环境。

•  core/enhanced_call_stack_normalizer.rs（当前约60.9%）（次优先）
  价值：过滤/归一化堆栈，影响诊断输出一致性。
  建议用例：
•  平台差异路径：含..、.、重复斜杠、Windows风格反斜杠。
•  末尾/起始的框架清理：内联栈/尾帧过滤逻辑。
•  无路径/空输入容错。

建议暂时跳过（ROI低或风险高）
•  CLI和bin目录下文件（例如 cli/commands/html_from_json/*、bin/*、cli/commands/test.rs）
  理由：强依赖外部环境与IO，测试价值相对低、维护成本高。
•  core/tracker/global_functions.rs、core/tracker/*（涉及全局状态/并发）
  理由：coverage.md 已明确提示慎用 get_global_tracker()/TrackingManager::new()，此类测试易引入死锁与不稳定。
•  core/sharded_locks.rs、并发锁相关
  理由：并发测试容易出现脆弱/偶发失败，不利于稳定CI。
•  export/binary/html_export.rs、html_converter.rs、visualization.rs
  理由：输出偏展示层，端到端验证才更有意义，单元测试收益不如解析/写出等底层模块。

建议执行顺序（遵循“逐文件提测、一次通过再下一个”的流程）

1) core/optimized_types.rs（快速增量、低风险）
2) core/enhanced_pointer_extractor.rs（边界明确、可控）
3) export/error_handling.rs（横切面、提升质量）
4) export/binary/streaming_json_writer.rs（状态机类、修复潜在bug）
5) export/binary/batch_processor.rs（调度/重试类）
6) export/binary/parser.rs（投入偏大，但极其关键）
7) core/smart_optimization.rs
8) core/enhanced_call_stack_normalizer.rs（如时间允许）

注意与约束
•  测试必须放在对应文件内的 mod tests 中，不新增 rs 文件。
•  避免使用 get_global_tracker() 与 TrackingManager::new()。
•  每个文件的测试通过后再进行下一个文件，且仅添加“有意义”的用例（覆盖真实逻辑分支与边界，而非机械断言）。
